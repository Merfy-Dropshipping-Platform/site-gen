---
import BaseLayout from '../layouts/BaseLayout.astro';
import data from '../data/data.json';
import siteConfig from '../data/site-config.json';
import products from '../data/products.json';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import PopularProducts from '../components/PopularProducts.astro';

const meta = data?.meta ?? {};
const blocks = data?.content ?? [];
const headerBlock = blocks.find((b: any) => b.type === 'Header');
const footerBlock = blocks.find((b: any) => b.type === 'Footer');
const headerProps = headerBlock?.props ?? (siteConfig as any)?.header ?? {};
const footerProps = footerBlock?.props ?? (siteConfig as any)?.footer ?? {};
---
<BaseLayout title={`Каталог — ${meta?.title ?? 'Мой сайт'}`} description={meta?.description}>
  <Header {...headerProps} />

  <main class="flex-1 w-full max-w-[1200px] mx-auto px-5 py-10">
    <div class="text-center mb-10">
      <p class="mb-4 text-sm text-gray-500 font-manrope">
        <a href="/" class="text-gray-500 hover:text-black">Главная</a> / Каталог
      </p>
      <h1 class="text-4xl font-comfortaa">Каталог</h1>
    </div>

    <PopularProducts products={products} />
  </main>

  <Footer {...footerProps} />
</BaseLayout>
