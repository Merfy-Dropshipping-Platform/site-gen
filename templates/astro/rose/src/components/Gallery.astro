---
import SectionHeader from './shared/SectionHeader.astro';
import GalleryProductCard from './gallery/GalleryProductCard.astro';
import GalleryCollection from './gallery/GalleryCollection.astro';

interface Props {
  heading?: any;
  text?: any;
  imagePosition?: string;
  featuredImage?: { url?: string; alt?: string };
  productCard?: { enabled?: string; name?: string; price?: string; oldPrice?: string; image?: string };
  collectionCard?: { enabled?: string; name?: string; image?: string };
  padding?: { top?: number; bottom?: number };
  colorScheme?: string;
}

const {
  heading = { text: 'Галерея', size: 'small' },
  text = { content: 'Стиль для каждой ситуации - найдите свой в каталоге.', size: 'small' },
  imagePosition = 'left',
  featuredImage = { url: '/images/gallery-1.png', alt: 'Галерея' },
  productCard = { enabled: 'true', name: 'Сумка', price: '5 990₽', oldPrice: '7 990₽', image: '/images/gallery-2.png' },
  collectionCard = { enabled: 'true', name: 'Коллекция FUTURISM', image: '/images/gallery-3.png' },
  padding = { top: 80, bottom: 80 },
} = Astro.props;

const headingText = typeof heading === 'object' ? heading?.text : heading;
const textContent = typeof text === 'object' ? text?.content : text;
const showProduct = productCard?.enabled !== 'false';
const showCollection = collectionCard?.enabled !== 'false';
const isRight = imagePosition === 'right';
---

<section class="bg-white w-full" style={`padding: ${padding?.top || 80}px 0 ${padding?.bottom || 80}px;`}>
  <div class="w-full max-w-[1920px] mx-auto px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-[300px]">
    <SectionHeader title={headingText || ''} subtitle={textContent} />

    <div class={`grid grid-cols-1 lg:grid-cols-[1fr_400px] gap-4 sm:gap-5 md:gap-6 lg:gap-[20px] ${isRight ? 'direction-rtl' : ''}`}>
      <!-- Featured Image -->
      <div class={`w-full aspect-[920/900] lg:aspect-auto lg:h-[900px] bg-gray-100 rounded-lg sm:rounded-[8px] md:rounded-[10px] overflow-hidden ${isRight ? 'lg:order-2' : ''}`}>
        <img
          src={featuredImage?.url || '/images/gallery-1.png'}
          alt={featuredImage?.alt || 'Галерея'}
          loading="lazy"
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Right Column -->
      <div class={`flex flex-col gap-4 sm:gap-5 md:gap-6 lg:gap-[20px] ${isRight ? 'lg:order-1' : ''}`}>
        {showProduct && (
          <GalleryProductCard
            name={productCard?.name || 'Товар'}
            price={productCard?.price || '0₽'}
            oldPrice={productCard?.oldPrice}
            image={productCard?.image || '/images/gallery-2.png'}
          />
        )}

        {showCollection && (
          <GalleryCollection
            name={collectionCard?.name || 'Коллекция'}
            image={collectionCard?.image || '/images/gallery-3.png'}
          />
        )}
      </div>
    </div>
  </div>
</section>
