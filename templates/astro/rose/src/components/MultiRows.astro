---
interface Row {
  id?: string;
  image?: string;
  title?: string;
  headingSize?: 'small' | 'medium' | 'large';
  description?: string;
  textSize?: 'small' | 'medium' | 'large';
  button?: { enabled?: string; text?: string; link?: string };
  hidden?: boolean;
}

interface Props {
  heading?: { enabled?: string; text?: string; size?: 'small' | 'medium' | 'large' };
  rows?: Row[];
  size?: 'small' | 'medium' | 'large';
  width?: 'small' | 'medium' | 'large';
  rowsPosition?: 'left' | 'right';
  alignment?: 'left' | 'center' | 'right';
  buttonStyle?: 'primary' | 'secondary';
  colorScheme?: string;
  padding?: { top?: number; bottom?: number };
}

const { heading, rows = [], size = 'medium', rowsPosition = 'left', alignment = 'left', buttonStyle = 'primary', padding } = Astro.props;
const showHeading = heading?.enabled !== 'false' && heading?.text;
const headingSize = heading?.size ?? 'medium';
const padTop = padding?.top ?? 80;
const padBottom = padding?.bottom ?? 80;
const visibleRows = rows.filter((r) => !r.hidden);

const headingSizeClass: Record<string, string> = {
  small: 'text-2xl',
  medium: 'text-[2rem]',
  large: 'text-[2.5rem]',
};

const alignClass: Record<string, string> = {
  left: 'text-left',
  center: 'text-center',
  right: 'text-right',
};

const btnPrimaryClass = 'bg-black text-white hover:bg-gray-800';
const btnSecondaryClass = 'bg-transparent text-gray-800 border border-gray-300 hover:border-black hover:text-black';
---

<section class="max-w-[1200px] mx-auto px-5" style={`padding-top: ${padTop}px; padding-bottom: ${padBottom}px;`}>
  <div>
    {showHeading && (
      <h2 class={`font-comfortaa font-medium text-gray-900 text-center mb-12 leading-[1.2] ${headingSizeClass[headingSize] ?? 'text-[2rem]'}`}>
        {heading!.text}
      </h2>
    )}

    <div class="flex flex-col gap-[60px]">
      {visibleRows.map((row, i) => {
        const imageRight = (i % 2 === 0 ? rowsPosition : rowsPosition === 'left' ? 'right' : 'left') === 'right';
        return (
          <div class={`grid grid-cols-1 md:grid-cols-2 gap-[60px] md:gap-[60px] max-md:gap-6 items-center ${alignClass[alignment] ?? 'text-left'}`}>
            {row.image && (
              <div class={`overflow-hidden rounded-2xl ${imageRight ? 'md:order-2' : ''}`}>
                <img src={row.image} alt={row.title ?? ''} loading="lazy" class="w-full h-auto object-cover rounded-2xl" />
              </div>
            )}
            <div class={imageRight ? 'md:order-1' : ''}>
              {row.title && (
                <h3 class="font-comfortaa text-2xl font-medium text-gray-900 mb-4 leading-[1.2]">{row.title}</h3>
              )}
              {row.description && (
                <p class="text-[1.05rem] text-gray-600 leading-[1.7] mb-6">{row.description}</p>
              )}
              {row.button?.enabled !== 'false' && row.button?.text && (
                <a
                  href={row.button.link ?? '#'}
                  class={`inline-flex py-3 px-7 text-[0.95rem] font-medium rounded-lg no-underline transition-all duration-200 ${buttonStyle === 'secondary' ? btnSecondaryClass : btnPrimaryClass}`}
                >
                  {row.button.text}
                </a>
              )}
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>
