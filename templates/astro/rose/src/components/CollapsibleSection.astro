---
interface Item {
  title?: string;
  content?: string;
  hidden?: boolean;
}

interface Props {
  heading?: { enabled?: string; text?: string };
  items?: Item[];
}

const { heading, items = [] } = Astro.props;
const showHeading = heading?.enabled !== 'false' && heading?.text;
const visibleItems = items.filter((item) => !item.hidden);
---

<section class="max-w-[800px] mx-auto py-20 px-5">
  <div>
    {showHeading && (
      <h2 class="font-comfortaa text-[2rem] font-medium text-gray-900 text-center mb-12 leading-[1.2]">
        {heading!.text}
      </h2>
    )}

    {visibleItems.length === 0 ? (
      <p class="text-center text-gray-500 text-lg">Вопросы скоро появятся</p>
    ) : (
      <div class="flex flex-col">
        {visibleItems.map((item) => (
          <details class="border-b border-gray-200 group">
            <summary class="flex items-center justify-between py-5 text-[1.05rem] font-medium text-gray-900 cursor-pointer list-none transition-colors duration-200 hover:text-black [&::-webkit-details-marker]:hidden">
              {item.title ?? 'Вопрос'}
              <span class="text-2xl font-light text-gray-400 group-open:hidden">+</span>
              <span class="text-2xl font-light text-gray-400 hidden group-open:inline">&minus;</span>
            </summary>
            <div class="pb-5 text-base text-gray-600 leading-[1.7]">
              <p>{item.content ?? ''}</p>
            </div>
          </details>
        ))}
      </div>
    )}
  </div>
</section>
